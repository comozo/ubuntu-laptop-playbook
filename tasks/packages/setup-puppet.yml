---
# Install Puppetlabs repos

- name: "(Install: Debian/Ubuntu) Install Puppetlabs official repos"
  block:

- name: Add an Puppetlabs signing key on Debian
  apt_key:
    url: http://apt.puppetlabs.com/DEB-GPG-KEY-puppetlabs
    state: present

- name: add Puppetlabs repository on Debian
  apt_repository:
    repo: "deb http://apt.puppetlabs.com/{{ ansible_distribution_release }} puppet{{ puppet_version }}"
    state: present

- name: Install puppet-agent
  package:
    name: puppet-agent
    ensure: present
